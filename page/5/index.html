<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="GwangHui Park"><meta name="copyright" content="GwangHui Park"><title>History | Gwang Story</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">GwangHui Park</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">100</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">47</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">12</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Gwang Story</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">Gwang Story</div><div id="site-sub-title">History</div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2020/08/07/webpack-bundle-analyzer/">webpack-bundle-analyzer</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-08-07</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/javascript/">javascript</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/vue/">vue</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/webpack/">webpack</a></span><div class="content"><h3 id="webpack-bundle-analyzer"><a class="markdownIt-Anchor" href="#webpack-bundle-analyzer"></a> Webpack bundle analyzer</h3>
<ul>
<li>Project를 진행하고 있는데 Bundle의 사이즈가 커져 빌드시 워닝이 뜨고 있는 상태이다.</li>
<li>아무리 gzip 압축을 진행한다 한들 원채 사이즈가 크면 속도에 지대한 영향을 끼친다.</li>
<li>Webpack bundle analyzer
<ul>
<li>npm install --save-dev webpack-bundle-analyzer</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> BundleAnalyzerPlugin = <span class="built_in">require</span>(<span class="string">'webpack-bundle-analyzer'</span>)</span><br><span class="line">  .BundleAnalyzerPlugin;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  publicPath: <span class="string">'/'</span>,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    port: <span class="number">8081</span>,</span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">'/api'</span>: &#123;</span><br><span class="line">        target: process.env.API_SERVER_URL,</span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  configureWebpack: &#123;</span><br><span class="line">    resolve: &#123;</span><br><span class="line">      alias: &#123;</span><br><span class="line">        <span class="string">'@'</span>: path.join(__dirname, <span class="string">'src'</span>),</span><br><span class="line">        assets: path.resolve(__dirname, <span class="string">'src'</span>, <span class="string">'assets'</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [<span class="keyword">new</span> BundleAnalyzerPlugin()],</span><br><span class="line">  &#125;,</span><br><span class="line">  css: &#123;</span><br><span class="line">    loaderOptions: &#123;</span><br><span class="line">      sass: &#123;</span><br><span class="line">        prependData: <span class="string">`@import "@/assets/scss/main.scss";`</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/21/cryptography-ssl-certification-nginx/">cryptography-ssl-certification-nginx</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-21</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/cryptography/">cryptography</a></span><div class="content"><ul>
<li>
<p>SSL 인증서 파일 포멧 종류</p>
<ul>
<li>확장자는 그 파일의 특성이 무엇인지 쉽게 알 붙이는 것이지만, 바이너리 이진 파일에 .txt 확장자를 붙일수도 있는 것처럼 말그대로 이름일 뿐이다.<br />
그래서 확장자 보다는 해당 파일의 실제 형식을 확인하는 것이 중요하다.</li>
</ul>
</li>
<li>
<p>파일 포멧</p>
<ul>
<li>.pem
<ul>
<li>PEM(Privacy Enhanced Mail)은 Base64 인코딩된 ASCII 텍스트 이다. 파일 구분 확장자로 .pem을 주로 사용한다.<br />
개인키, 서버 인증서, 루트 인증서, 체인 인증서 및 SSL 발급 요청시 생성하는 CSR 등에 사용되는 포멧이며, 가장 광범위하고 거의 99% 대부분의 시스템에 호환되는 산업 표준이다.</li>
</ul>
</li>
<li>.crt
<ul>
<li>대부분 PEM 포멧이고 유닉스/리눅스 기반 시스템에서 인증서로 구분하기 뒤해 사용된다.</li>
</ul>
</li>
<li>.cer
<ul>
<li>대부분 PEM 포멧이고 윈도우 기반 시스템에서 인증서로 구분하기 뒤해 사용된다.</li>
</ul>
</li>
<li>.csr
<ul>
<li>CSR(Cerfiticate Signing Request)는 PEM포멧이며, SSL 발급 신청을 위해서 본 파일 내용을 인증기관 CA에 제출하는 요청서 파일임을 구분하기 위해서 붙이는 확장자 이다.</li>
</ul>
</li>
<li>.der
<ul>
<li>DER(Distinguished Encoding Representation)의 약자이며, 바이너리 포멧이다. 최근에는 잘 사용되지 않는다.</li>
</ul>
</li>
<li>.key
<ul>
<li>OPENSSL 및 Java에서 개인키 파일임을 구분하기 위해서 사용되는 확장자이다. PEM일수도 있고 DER일수도 있다.</li>
</ul>
</li>
<li>.jks
<ul>
<li>Java Key Store의 약자이며, Java 기반의 독자 인증서 바이너리 포멧이다. 개인키,서버 인증서, 루트 인증서, 체인인증서를 모두 담고 있다.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/19/spring-boot-proxy/">spring-boot-proxy</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-19</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/springboot/">springboot</a></span><div class="content"><h3 id="spring-proxy"><a class="markdownIt-Anchor" href="#spring-proxy"></a> Spring Proxy</h3>
<ul>
<li>
<p>Proxy pattern</p>
<ul>
<li>실제 기능을 수행하는 객체(Real Object)대신 가장의 객체(Proxy Object)를 사용해 로직의 흐름을 제어하는 디자인 패턴</li>
<li>원래 하려던 기능 외에 다른 것을 추가하고 싶으나 해당 코드 자체를 변경 하지 않고 싶을때, 많이 사용한다.</li>
<li>Real Object, Proxy Object는 동일한 인터페이스를 구현하고 Proxy Object는 메서드 수행시 Real Object의 메소드 실행을 가로챈다.
<ul>
<li>Virtual Proxy(Lazy initialisation 등), Protection Proxy</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Byte Code Generation Library</p>
<ul>
<li>cglib : <a href="https://github.com/cglib/cglib" target="_blank" rel="noopener">https://github.com/cglib/cglib</a></li>
<li>byteBuddy : <a href="https://bytebuddy.net" target="_blank" rel="noopener">https://bytebuddy.net</a></li>
</ul>
</li>
<li>
<p>ASM : Java bytecode manipulation and analysis framework</p>
<ul>
<li><a href="https://asm.ow2.io/" target="_blank" rel="noopener">https://asm.ow2.io/</a></li>
</ul>
</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/18/spring-boot-application-context/">spring-boot-application-context</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-18</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/springboot/">springboot</a></span><div class="content"><h3 id="annotation-config-servlet-application-context-spring-boot-231-version-기준"><a class="markdownIt-Anchor" href="#annotation-config-servlet-application-context-spring-boot-231-version-기준"></a> Annotation Config Servlet Application Context (Spring boot 2.3.1 Version 기준)</h3>
<p><img src="/images/springboot/applicationContext/annotation_config_servlet_application_context_class_diagram.png" alt="" /></p>
<ul>
<li>AnnotationBeanDefinitionReader<br />
<img src="/images/springboot/applicationContext/annotated_bean_definition_reader.png" alt="" />
<ul>
<li>Field 설명
<ul>
<li>BeanNameGenerator :</li>
</ul>
</li>
<li>기능 설명</li>
<li>명칭은 Reader인데 Bean을 등록하는 함수를 가지고 있다.</li>
<li>registerBean과 Environment 생성을 담당한다.
<ul>
<li>Environment : Java System의 Environment로 System Properties(String value)와 System Environment(Key/Value)를 propertySource에 등록한다.</li>
<li>registerBean :</li>
</ul>
</li>
</ul>
</li>
<li>ClassPathBeanDefinitionScanner</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/08/security-project-account-rule/">security-project-account-rule</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-08</time><div class="content"><ul>
<li>
<p>계정 관리</p>
<table>
<thead>
<tr>
<th>항목</th>
<th>비고</th>
</tr>
</thead>
<tbody>
<tr>
<td>패스워드 규칙 관리</td>
<td>10자리 이상 영문/숫자/특수문자 2가지 이상 조합 사용</td>
</tr>
<tr>
<td>패스워드 변경 주기</td>
<td>90일 이내 패스워드 변경 진행</td>
</tr>
<tr>
<td>패스워드 암호화</td>
<td>안전한 암호화 로직으로 패스워드 암호화</td>
</tr>
<tr>
<td>계정별 권한 설정</td>
<td>사용자별 계정의 용도 파악 및 적절한 권한을 부여</td>
</tr>
<tr>
<td>계정 관리</td>
<td>1인 1계정 사용</td>
</tr>
<tr>
<td>로그인 실패 횟수 제한</td>
<td>로그온 실패 횟수를 5회 이하로 제한한 경우 양호 (실패시 일정시간 잠금 조치)</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>접근 관리</p>
<table>
<thead>
<tr>
<th>항목</th>
<th>비고</th>
</tr>
</thead>
<tbody>
<tr>
<td>관리자 Page 원격 관리 접근 통제</td>
<td>원격 관리시 관리자 IP 또는 특정 IP만 접근 가능하도록 설정</td>
</tr>
<tr>
<td>암호화 통신 접속</td>
<td>HTTPS 양호</td>
</tr>
<tr>
<td>Session Timeout 설정</td>
<td>Session Timeout시간을 설정한 경우 양호</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>로그 관리</p>
<table>
<thead>
<tr>
<th>항목</th>
<th>비고</th>
</tr>
</thead>
<tbody>
<tr>
<td>정책 변경 로그 설정</td>
<td>관리자 정책 변경에 따른 로그 기록</td>
</tr>
<tr>
<td>사용자 접속 로그 보안</td>
<td>사용자 로그인/접속 로그 보관 설정</td>
</tr>
<tr>
<td>시스템 로그 정기적 검토</td>
<td>시스템 로그 검토(이상 접속 여부)를 정기적으로 검토</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/01/protocol-smtp/">protocol-smtp</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-01</time><div class="content"><h3 id="smtp-simple-mail-transfer-protocol"><a class="markdownIt-Anchor" href="#smtp-simple-mail-transfer-protocol"></a> SMTP (Simple Mail Transfer Protocol)</h3>
<ul>
<li>SMTP : 두 메일시스템이 전자우편을 교환할 수 있게 하는 메세지 전송용 프로토콜</li>
<li>통신 포트 : 25</li>
<li>모든 처리는 항상 하나의 <em>TCP</em> 연결을 통해 실행됨</li>
<li>메일 서버는 데몬으로 동작하며, 메일 클라이언트로부터 요청에 항상 준비</li>
</ul>
<h4 id="주요-구성-요소"><a class="markdownIt-Anchor" href="#주요-구성-요소"></a> 주요 구성 요소</h4>
<ul>
<li>UA(User Agent) : Outlook, Zmail등</li>
<li>MTA(Message Transfer Agent) : 메일을 중계, 전달하는 기능을 수행</li>
<li>MAA(Message Access Agent) : 메일 엑세스용 프로토콜</li>
</ul>
<p><img src="/images/protocol/smtp/mta_maa.png" alt="" /></p>
<h4 id="mta-클라이언트-및-mta-서버-간-주요-명령-및-응답"><a class="markdownIt-Anchor" href="#mta-클라이언트-및-mta-서버-간-주요-명령-및-응답"></a> MTA 클라이언트 및 MTA 서버 간 주요 명령 및 응답</h4>
<ul>
<li>SMTP 주요 명령
<ul>
<li>HELLO : 클라이언트 자신이 누구인지 밝힘 (Hello : <a href="http://kwang.co.kr" target="_blank" rel="noopener">kwang.co.kr</a>)</li>
<li>MAIL FROM : 클라이언트가 메일 송신자가 누구인지</li>
<li>RCPT TO : 수신처</li>
<li>DATA : 전체 메일 메세지 전송을 송신측에서 준비됨</li>
<li>QUIT 등</li>
</ul>
</li>
</ul>
<h4 id="mail-message-format"><a class="markdownIt-Anchor" href="#mail-message-format"></a> Mail Message Format</h4>
<ul>
<li>메세지 구성
<ul>
<li>
<p>Header</p>
<ul>
<li>Return-Path : 하나 이상의 SMTP 서버 경유시</li>
<li>Received : 하나 이상의 SMTP 서버 경유시</li>
<li>From: 발신자</li>
<li>To : 수신자</li>
<li>Subject : 제목</li>
<li>Date : 날짜</li>
<li>MIME 확장 : Body에 멀티미디어 데이터가 포함되는 경우에 MIME(Multi-purpose Internet Mail Extension Type)
<ul>
<li>MIME-version</li>
<li>Content-Transfer-Encoding</li>
<li>Content-Type:</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>Content-Type</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>Text / Plain</td>
<td>포맷되지 않는 텍스트 (특정한 문자세트로 구성됨)</td>
</tr>
<tr>
<td>Text / Richtext</td>
<td>볼드, 이탤릭체, 밑줄 등 간단한 포맷을 가진 텍스트</td>
</tr>
<tr>
<td>Application / Octet-Stream</td>
<td>Binary 데이타</td>
</tr>
<tr>
<td>Application / Postscript</td>
<td>PostScript 프로그램</td>
</tr>
<tr>
<td>Message / RFC 822</td>
<td>또다른 우편 메시지 RFC 822</td>
</tr>
<tr>
<td>Image / JPEG</td>
<td>정지화상 데이타, ISO 10918 포맷</td>
</tr>
<tr>
<td>Image / GIF</td>
<td>정지화상 데이타, CompuServe의 Graphic interchange 포맷</td>
</tr>
<tr>
<td>Video / MPEG</td>
<td>동화상 데이타, ISO 11172 포맷</td>
</tr>
<tr>
<td>Audio / Basic</td>
<td>오디오 데이타, 8비트 ISDN mu-law 포맷을 사용한 인코드</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Body</p>
<ul>
<li>각 줄은 단일점. 으로 끝남</li>
<li>멀티 미디어용 데이터인 경우에는 헤더부분에 MIME 선언이 있음</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="highlight"><code class="Text">telnet 172.0.0.1 25
HELLO kwang.co.kr
MAIL FROM:kwang@kwang.co.kr
RCPT TO:kwang@kwang.co.kr
DATA
SUBJECT: Test subject
test content
. 
</code></pre>
<p>RFC-2045 : Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies. N. Freed, N. Borenstein. November 1996. (Status: DRAFT STANDARD)<br />
RFC-2046 : Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types. N. Freed, N. Borenstein. November 1996. (Status: DRAFT STANDARD)<br />
RFC-2047 : MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text. K. Moore. November 1996. (Status: DRAFT STANDARD)<br />
RFC-2048 : Multipurpose Internet Mail Extensions (MIME) Part Four: Registration Procedures. N. Freed, J. Klensin, J. Postel. November 1996. (Status: BEST CURRENT PRACTICE)<br />
RFC-2049 : Multipurpose Internet Mail Extensions (MIME) Part Five: Conformance Criteria and Examples. N. Freed, N. Borenstein. November 1996. (Status: DRAFT STANDARD)</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/29/spring-boot-configuration-properties/">spring-boot-configuration-properties</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-06-29</time><div class="content"><h3 id="configurationproperties"><a class="markdownIt-Anchor" href="#configurationproperties"></a> @ConfigurationProperties</h3>
<ul>
<li>Spring Mail 서비스로 메일 전송하는 기능을 만드려고 하다가 application.yml과 연동되는 Property 값들을 정의하는 방법부터 정리하고자 한다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.mail"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MailProperties</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String host;</span><br><span class="line">	<span class="keyword">private</span> Integer port;</span><br><span class="line">	<span class="keyword">private</span> String username;</span><br><span class="line">	<span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">    mail:</span></span><br><span class="line"><span class="attr">      host:</span></span><br><span class="line"><span class="attr">      port:</span></span><br><span class="line"><span class="attr">      username:</span></span><br><span class="line"><span class="attr">      password:</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>(proxyBeanMethods = <span class="keyword">false</span>)</span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(&#123; MimeMessage.class, MimeType.class, MailSender.class &#125;)</span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span>(MailSender.class)</span><br><span class="line"><span class="meta">@Conditional</span>(MailSenderCondition.class)</span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span>(MailProperties.class)</span><br><span class="line"><span class="meta">@Import</span>(&#123; MailSenderJndiConfiguration.class, MailSenderPropertiesConfiguration.class &#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MailSenderAutoConfiguration</span> </span>&#123;</span><br><span class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MailSenderCondition</span> <span class="keyword">extends</span> <span class="title">AnyNestedCondition</span> </span>&#123;</span><br><span class="line">		MailSenderCondition() &#123;</span><br><span class="line">			<span class="keyword">super</span>(ConfigurationPhase.PARSE_CONFIGURATION);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="meta">@ConditionalOnProperty</span>(prefix = <span class="string">"spring.mail"</span>, name = <span class="string">"host"</span>)</span><br><span class="line">		<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">HostProperty</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="meta">@ConditionalOnProperty</span>(prefix = <span class="string">"spring.mail"</span>, name = <span class="string">"jndi-name"</span>)</span><br><span class="line">		<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">JndiNameProperty</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>@EnableConfigurationProperties 로 사용할 MailProperties.class를 선언한 뒤 MailSenderJndiConfiguration과 MailSenderPropertiesConfiguration.class의<br />
설정을 가져와 처리한다.</li>
<li>이 값을 사용하기 위해서는 Bean으로 선언되어 있기 때문에 주입 받아서 사용하면 된다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EMailService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> JavaMailSender javaMailSender;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> MailProperties mailProperties;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendSimpleMessageMail</span><span class="params">(String to, String subject, String content)</span> </span>&#123;</span><br><span class="line">       <span class="comment">// javaMailSender.send()</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/25/linux-run-level/">linux-run-level</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-06-25</time><div class="content"><h4 id="linux-run-level"><a class="markdownIt-Anchor" href="#linux-run-level"></a> Linux Run Level</h4>
<table>
<thead>
<tr>
<th>런레벨</th>
<th>상태</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>시스템 중지</td>
</tr>
<tr>
<td>1</td>
<td>단일 사용자 모드(복구 모드)</td>
</tr>
<tr>
<td>2</td>
<td>NFS 없는 다중 사용자 모드</td>
</tr>
<tr>
<td>3</td>
<td>완전한 다중 사용자 모드</td>
</tr>
<tr>
<td>4</td>
<td>미사용</td>
</tr>
<tr>
<td>5</td>
<td>그래픽 인터페이스 모드</td>
</tr>
<tr>
<td>6</td>
<td>시스템 재시작</td>
</tr>
</tbody>
</table>
<ul>
<li>Debian, Ubuntu : Run Level 2</li>
<li>RedHat, fedora, CentOS, gentoo : Run Level 3</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/25/project-Security/">project-nginx</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-06-25</time><div class="content"><h3 id="nginx-설치"><a class="markdownIt-Anchor" href="#nginx-설치"></a> Nginx 설치</h3>
<h4 id="사전-설치-필요-library"><a class="markdownIt-Anchor" href="#사전-설치-필요-library"></a> 사전 설치 필요 Library</h4>
<ul>
<li>GCC (GNU) : GNU Compiler Collection</li>
<li>PCRE (Perl Compatible Regular Expression) : URL 재작성 모듈 및 HTTP 핵심 모듈이 정규식을 사용한다.</li>
<li>zlib : nginx gzip 압축 하는데 필요</li>
<li>OPENSSL : SSL v2/v3, TLS v1 protocol 지원<br />
sudo apt-get install build-essential<br />
sudo apt-get install libpcre3 libpcre3-dev<br />
sudo apt install zlib zlib-devel<br />
sudo apt install zlib1g zlib1g-dev<br />
sudo apt install openssl libssl-dev</li>
</ul>
<p>sudo yum install gcc gcc-c++ make<br />
sudo yum install pcre pcre-devel<br />
sudo yum install zlib zlib-devel<br />
sudo yum install openssl openssl-devel</p>
<h4 id="make-compile"><a class="markdownIt-Anchor" href="#make-compile"></a> Make Compile</h4>
<ul>
<li>./configure --prefix=/home/lscns/project/nginx --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-http_gzip_static_module
<ul>
<li>prefix = base nginx folder</li>
<li>make</li>
<li>make install</li>
</ul>
</li>
</ul>
<h4 id="make-compile-2"><a class="markdownIt-Anchor" href="#make-compile-2"></a> Make Compile</h4>
<ul>
<li>./configure --prefix=/DATA/nginx --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-http_gzip_static_module
<ul>
<li>prefix = base nginx folder</li>
<li>make</li>
<li>make install</li>
</ul>
</li>
</ul>
<h3 id="response-header"><a class="markdownIt-Anchor" href="#response-header"></a> Response Header</h3>
<ul>
<li>X-Content-Type-Option : 리소스를 다운로드할때 해당 리소스의 MIMETYPE이 일치하지 않는 경우 차단
<ul>
<li>해당 헤더 추가</li>
<li>X-Content-Type-Options: nosniff</li>
</ul>
</li>
<li>Strict-Transport-Security : 한번 https로 접속하는 경우 이후의 모든 요청을 http로 요청하더라도 브라우저가 자동으로 https로 요청
<ul>
<li>해당 헤더 추가</li>
<li>Strict-Transport-Security: max-age=63072000; includeSubdomains; preload</li>
</ul>
</li>
<li>X-XSS-Protection : (XSS) 공격을 감지 할 때 페이지 로드를 중지시킬 수 있습니다.
<ul>
<li>해당 헤더 추가</li>
<li>X-XSS-Protection: 1;mode=block</li>
</ul>
</li>
<li>X-Frame-Options : 해당 페이지를 <frame> 또는 <iframe>, <object> 에서 렌더링할 수 있는지 여부를 나타내는데 사용됩니다.
<ul>
<li>해당 헤더 추가</li>
<li>X-Frame-Options: sameorigin</li>
</ul>
</li>
<li>Referrer-Policy
<ul>
<li>해당 헤더 추가</li>
<li>‘Referrer-Policy’ ‘origin’;</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">add_header X-Content-Type-Options &quot;nosniff&quot;;</span><br><span class="line">add_header X-XSS-Protection &quot;1;mode=block&quot;;</span><br><span class="line">add_header X-Frame-Options &quot;sameorigin&quot;;</span><br><span class="line">add_header Strict-Transport-Security &quot;max-age=63072000; includeSubdomains; preload&quot;;</span><br><span class="line">add_header &apos;Referrer-Policy&apos; &apos;origin&apos;;</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">### Java</span><br><span class="line">- 모든 중요한 쿠키에 &apos;Secure&apos; 속성을 더할 것</span><br><span class="line">- The set-cookie was blocked because it has the secure </span><br><span class="line">```yaml</span><br><span class="line">server:</span><br><span class="line">  servlet:</span><br><span class="line">    session:</span><br><span class="line">      cookie:</span><br><span class="line">        secure: true</span><br></pre></td></tr></table></figure>
<h3 id="nginx-cors"><a class="markdownIt-Anchor" href="#nginx-cors"></a> nginx CORS</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">     if ($request_method = &apos;OPTIONS&apos;) &#123;</span><br><span class="line">        add_header &apos;Access-Control-Allow-Origin&apos; &apos;*&apos;;</span><br><span class="line">        add_header &apos;Vary: Origin&apos;;</span><br><span class="line">        add_header &apos;Access-Control-Allow-Methods&apos; &apos;GET, POST, OPTIONS&apos;;</span><br><span class="line">        #</span><br><span class="line">        # Custom headers and headers various browsers *should* be OK with but aren&apos;t</span><br><span class="line">        #</span><br><span class="line">        add_header &apos;Access-Control-Allow-Headers&apos; &apos;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range&apos;;</span><br><span class="line">        #</span><br><span class="line">        # Tell client that this pre-flight info is valid for 20 days</span><br><span class="line">        #</span><br><span class="line">        add_header &apos;Access-Control-Max-Age&apos; 1728000;</span><br><span class="line">        add_header &apos;Content-Type&apos; &apos;text/plain; charset=utf-8&apos;;</span><br><span class="line">        add_header &apos;Content-Length&apos; 0;</span><br><span class="line">        return 204;</span><br><span class="line">     &#125;</span><br><span class="line">     if ($request_method = &apos;POST&apos;) &#123;</span><br><span class="line">        add_header &apos;Access-Control-Allow-Origin&apos; &apos;*&apos;;</span><br><span class="line">        add_header &apos;Access-Control-Allow-Methods&apos; &apos;GET, POST, OPTIONS&apos;;</span><br><span class="line">        add_header &apos;Access-Control-Allow-Headers&apos; &apos;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range&apos;;</span><br><span class="line">        add_header &apos;Access-Control-Expose-Headers&apos; &apos;Content-Length,Content-Range&apos;;</span><br><span class="line">     &#125;</span><br><span class="line">     if ($request_method = &apos;GET&apos;) &#123;</span><br><span class="line">        add_header &apos;Access-Control-Allow-Origin&apos; &apos;*&apos;;</span><br><span class="line">        add_header &apos;Access-Control-Allow-Methods&apos; &apos;GET, POST, OPTIONS&apos;;</span><br><span class="line">        add_header &apos;Access-Control-Allow-Headers&apos; &apos;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range&apos;;</span><br><span class="line">        add_header &apos;Access-Control-Expose-Headers&apos; &apos;Content-Length,Content-Range&apos;;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="on-site-request-forgery-attack"><a class="markdownIt-Anchor" href="#on-site-request-forgery-attack"></a> On-Site Request Forgery Attack</h3>
<h3 id="cross-site-request-forgery-attack"><a class="markdownIt-Anchor" href="#cross-site-request-forgery-attack"></a> Cross-Site Request Forgery Attack</h3>
<p><img src="/images/project/security/access_control_allow.png" alt="" /></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/24/project-jasypt/">project-jasypt</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-06-24</time><div class="content"><h3 id="jasypt"><a class="markdownIt-Anchor" href="#jasypt"></a> jasypt</h3>
<ul>
<li>Java Simplified Encryption</li>
<li>Gradle 추가 compile “com.github.ulisesbocchio:jasypt-spring-boot-starter:1.17”</li>
<li>StringEncryptor Bean 생성 후 application.yml에 jasypt: encryptor: bean에 해당 bean 이름 선언</li>
</ul>
</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2021 By GwangHui Park</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>